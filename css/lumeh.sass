@import normalize.scss

@font-face
  font-family: 'Inter'
  font-style: normal
  font-weight: 100 900
  font-display: swap
  size-adjust: 90%
  src: url('/font/InterVariable.woff2') format('woff2')
@font-face
  font-family: 'Inter'
  font-style: italic
  font-weight: 100 900
  font-display: swap
  size-adjust: 90%
  src: url('/font/InterVariable-Italic.woff2') format('woff2')
@font-feature-values 'Inter'
  @styleset
    open-digits: 1;
    disambiguation-except-zero: 4;
@mixin font-inter-small
  font-family: 'Inter', sans-serif
  font-size: 0.8rem
  font-variation-settings: "opsz" 14
  font-weight: 400
  font-variant-alternates: styleset(disambiguation-except-zero, open-digits)
@mixin font-inter-regular
  font-family: 'Inter', sans-serif
  font-size: 0.95rem
  font-weight: 400
  font-variant-alternates: styleset(disambiguation-except-zero, open-digits)
@mixin font-inter-menu
  font-family: 'Inter', sans-serif
  font-size: 1.2rem
  font-variation-settings: "opsz" 24
  font-weight: 450
  font-variant-alternates: styleset(disambiguation-except-zero, open-digits)

@font-face
  font-family: 'Berkeley Mono'
  font-stretch: 60 100
  font-weight: 100 900
  font-style: oblique 0deg 16deg
  font-display: swap
  src: url('/assets/font/Berkeley Mono Variable.woff2') format('woff2')
@mixin font-berkeley-mono-inline
  font-family: 'Berkeley Mono', monospace
  font-size: 0.92em
  font-weight: 520
  font-stretch: 88%
  font-variant-ligatures: none
@mixin font-berkeley-mono-block
  font-family: 'Berkeley Mono', monospace
  font-size: 0.92rem
  font-weight: 450
  font-stretch: 88%
  line-height: normal
  font-variant-ligatures: none

@font-face
  font-family: 'Fern'
  font-style: normal
  font-weight: 400 800
  font-display: swap
  src: url('/assets/font/FernVariable-Roman-VF-Testing.woff2') format('opentype')
@font-face
  font-family: 'Fern'
  font-style: italic
  font-weight: 400 800
  font-display: swap
  src: url('/assets/font/FernVariable-Italic-VF-Testing.woff2') format('opentype')
@mixin font-fern-small
  font-family: 'Fern', serif
  font-size: 0.85rem
  font-variation-settings: "opsz" 8
  font-weight: 480
  line-height: 1.4
@mixin font-fern-regular
  font-family: 'Fern', serif
  font-size: 1rem
  font-variation-settings: "opsz" 9
  font-weight: 450
  line-height: 1.4

$page-border-radius: 20px
$page-border-width: 3px
$header-height: 104px
$logo-width: 96px
$logo-padding: 12px
$shadow-color: #a0a0a0

$mobile-width: 580px

$red: oklch(62% 0.18 24)
$orange: oklch(80% 0.15 80)
$yellow: oklch(84% 0.16 104)
$green: oklch(82% 0.20 127)
$link: oklch(65% 0.12 225)
$blue: oklch(68% 0.12 250)
$purple: oklch(65% 0.19 315)
$bg-light: oklch(98% 0 0)
$bg-dark: oklch(95% 0 0)
$bg-highlight: oklch(94% 0.07 104)

html
  background-color: #c7c6ca
  color: #303032
  @include font-fern-regular
  font-size: 1.1em
  padding: 1rem 1rem 3rem

  @media (max-width: $mobile-width)
    padding: 0 0 3rem

.page
  background-color: $bg-light
  border-radius: $page-border-radius
  box-shadow: 0 0 7px $shadow-color
  margin: 0 auto
  max-width: 920px

  @media (max-width: $mobile-width)
    border-radius: 0

  > *
    padding: 0 1rem
  > :first-child
    border-radius: $page-border-radius $page-border-radius 0 0
    @media (max-width: $mobile-width)
      border-radius: 0
  > :last-child
    border-radius: 0 0 $page-border-radius $page-border-radius
    overflow: hidden
    @media (max-width: $mobile-width)
      border-radius: 0

$shadow-gradient: linear-gradient(to top, rgba(black, 0.04), rgba(black, 0) 2px)
$logo: url("/image/logo.svg")
$stripes-shadow-size: 15px
$stripes-shadow-opacity: 0.1
$stripes-gradient: linear-gradient(112deg, transparent calc(70% - 2px - #{$stripes-shadow-size}), oklch(from $green l c h / $stripes-shadow-opacity) calc(70% - 1px), $green 70%, $green calc(75% - 4px), transparent calc(75% - 2px), $yellow 75%, $yellow calc(80% - 4px), transparent calc(80% - 2px), $blue 80%, $blue calc(85% - 4px), transparent calc(85% - 2px), $red 85%, $red calc(90% - 4px), transparent calc(90% - 2px), $purple 90%, $purple calc(95% - 2px), oklch(from $purple l c h / $stripes-shadow-opacity) 95%, transparent calc(95% + #{$stripes-shadow-size}))
$header-gradient: linear-gradient(to bottom, #f4f4f4, $bg-light)

#site-header
  background-image: $shadow-gradient, $logo, $stripes-gradient, $header-gradient
  background-repeat: no-repeat, no-repeat, no-repeat, repeat
  background-position: 0 0, left $logo-padding center
  border: solid $page-border-width #ffffff
  border-bottom: none
  color: #000000
  height: $header-height
  padding: 0

  @media (max-width: $mobile-width)
    border: none

  #site-title
    @include font-fern-regular
    font-size: 54px
    font-weight: 550
    line-height: $header-height
    margin: 0
    padding-left: ($logo-width + 2 * $logo-padding)
    overflow: hidden
    white-space: nowrap

#site-menu
  background: linear-gradient(to bottom, #dadada, #e4e4e4 85%, #e0e0e0)
  color: #000000
  @include font-inter-menu
  line-height: 1.5em
  overflow-x: auto
  padding: 0 0.5rem !important
  position: relative

  ul
    display: flex
    list-style: none
    margin: 0
    padding: 0

  li
    a
      color: inherit
      display: block
      text-align: center
      padding: 0 0.5rem
      &:hover,
      &:active,
      &.active
        background-color: $bg-light
        text-decoration: none

  &.truncated ul::after
    background: linear-gradient(to right, rgba(white, 0), rgba(white, 1))
    content: "Â "
    position: absolute
    right: 0
    width: 1.5rem


#breadcrumbs
  @include font-inter-regular
  ol
    display: flex
    flex-wrap: wrap
    list-style: none
    margin: 0.5em 0
    padding: 0
  li a
    padding: 0 0.2em

#page-info
  @include font-inter-regular
  float: right
  text-align: right

#edit
  @include font-inter-regular
  background-color: $bg-dark
  border-top: dashed 2px #e0e0e0
  display: block
  padding: 0.5em 1rem
  &:hover
    background-color: $bg-light

#footer
  @include font-inter-small
  text-align: center
  padding-top: 1em

  a
    color: oklch(from $link calc(l - 0.15) calc(c - 0.02) h)
  p
    margin: 0

// Directory listings
.list
  // Hide the Modified column
  .m
    display: none
  // Hide the first row ("..")
  tbody > tr:first-child
    display: none
  // Swap row coloring because of the first row removal
  tr:nth-child(even)
    background-color: $bg-light
  tr:nth-child(odd)
    background-color: $bg-dark

.page .main-content
  clear: right
  padding-bottom: 2em

p
  margin: 0.5em 0

h1
  font-size: 1.8em
  font-variation-settings: "opsz" 12
  font-weight: 450
  &.title
    margin: 0
    margin-top: 1em
    padding: 0

h2
  font-size: 1.4em
  font-variation-settings: "opsz" 11
  font-weight: 580

h3
  font-size: 1.2em
  font-variation-settings: "opsz" 10
  font-weight: 650

h4
  font-size: 1em
  font-weight: 700

h5
  font-size: 1em
  font-style: italic
  font-weight: 700

a
  color: $link
  text-decoration: none
  &:hover,
  &:active
    text-decoration: underline

  &[href*="chan.cafe"]
    &:hover,
    &:active
      color: green !important

a.anchor
  color: inherit
  text-decoration: none

  h1, h2, h3, h4
    border-top: 1px solid transparent
    border-bottom: 1px solid transparent
    margin: 0.5em -1rem 0
    padding: 0 1rem

    &:hover
      background: oklch(from $blue calc(l + 0.24) calc(c - 0.08) h)
      border-top: 1px solid $blue
      border-bottom: 1px solid $blue
      box-shadow: 0 0 10px -4px $blue
    &:target
      background: oklch(from $blue calc(l + 0.24) calc(c - 0.08) h)

p img, img.inline
  vertical-align: middle

p > img:first-child
  border: solid 1px #e0e0e0
  display: block
  height: auto
  margin: auto
  width: auto
  max-width: 100%

strong
  font-weight: 650

code
  @include font-berkeley-mono-inline
  white-space: pre
  padding: 0 0.1em

iframe
  display: block
  margin: 0.5em 0

@mixin toplevel-block
  background: $bg-dark
  border-top: solid 1px #e0e0e0
  border-bottom: solid 1px #e0e0e0
  margin: 0.5em -1rem
  padding: 0 1rem

blockquote
  @include toplevel-block
  > footer
    text-align: right

pre
  overflow: auto
  @include toplevel-block
  > code
    @include font-berkeley-mono-block
    background: $bg-dark
    display: block
    margin: 0.5em 0

aside,
figure
  border: solid 1px $blue
  border-radius: 10px
  overflow: hidden
  margin: 1em 2.5em
  padding: 0 1rem

  & > div:first-child pre.highlight
    border-top: 0
    margin-top: 0
    padding-top: 0.5em

    > code
      margin-top: 0

aside
  &.tip
    border-color: $green

  &.important
    border-color: $orange

  &.update
    border-color: $purple

ol,
ul
  list-style-position: outside
  padding: 0
  margin: 0.5em 2.5em 0

table
  border-collapse: collapse
  font-size: 0.9em
  width: 100%

  th, tr:nth-child(even)
    background-color: $bg-dark

  td,
  th
    border: solid 1px #e0e0e0
    padding: 0.2rem
    vertical-align: middle

@media print
  #site-header,
  #site-menu,
  #breadcrumbs,
  #page-info,
  #edit
    display: none

  html
    background: none
    color: black
    font-size: 0.9em

  .page
    background: none
    border: none
    border-radius: 0
    box-shadow: none
    margin: 0
    max-width: none
    min-width: 0

  blockquote,
  code,
  table
    background: none

.language-yaml
  .s
    color: #c4a800

.language-python
  .k
    font-weight: bold
  .mi
    color: #3c74c0
  .s
    color: #c4a800

.secret-border:hover
  border-color: $purple
